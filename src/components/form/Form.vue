<script setup>
import { computed } from 'vue';
import Card from '../card/Card.vue';
import { useTheme } from '../../composables/useTheme';

const props = defineProps({
  title: String,
  subTitle: String,
  saveBtnLabel: {
    type: String,
    default: 'Save',
  },
  cancelBtnLabel: {
    type: String,
    default: 'Cancel',
  },
  color: String,
  headerColor: String,
  bodyColor: String,
  footerColor: String,
  btnColor: String,
  saveBtnIconPath: String,
  cancelBtnIconPath: String,
  closable: Boolean,
  noHeader: Boolean,
  noFooter: Boolean,
  scrollable: Boolean,
  twoColumns: Boolean,
  threeColumns: Boolean,
});

const emit = defineEmits(['close', 'save', 'cancel']);
const { getColorInverse } = useTheme();

const btnColor = computed(() => props.btnColor ?? getColorInverse(props.color));
const headerColor = computed(() => props.headerColor ?? getColorInverse(props.color));
const bodyColor = computed(() => props.bodyColor ?? getColorInverse(props.color));
const footerColor = computed(() => props.footerColor ?? getColorInverse(props.color));
</script>
<template>
  <form>
    <Card
      :color="color"
      :headerColor="headerColor"
      :bodyColor="bodyColor"
      :footerColor="footerColor"
      :btnColor="btnColor"
      :title="title"
      :subTitle="subTitle"
      :saveBtnLabel="saveBtnLabel"
      :cancelBtnLabel="cancelBtnLabel"
      :saveBtnIconPath="saveBtnIconPath"
      :cancelBtnIconPath="cancelBtnIconPath"
      :closable="closable"
      :noHeader="noHeader"
      :noFooter="noFooter"
      @close="$emit('close')"
      @save="$emit('save')"
      @cancel="$emit('cancel')"
    >
      <template #header>
        <slot name="header"></slot>
      </template>
      <template #content>
        <slot name="content">
          <div 
            :class="[
              'p-4',
              bodyColor,
              { 'space-y-4' : !twoColumns && !threeColumns },
              { 'grid grid-cols-1 md:grid-cols-2 gap-4' : twoColumns },
              { 'grid grid-cols-1  md:grid-cols-2 lg:grid-cols-3 gap-4' : threeColumns },
              { 'max-h-[calc(100vh-224px)] overflow-y-auto': scrollable }
            ]"
          >
            <slot></slot>
          </div>
        </slot>
      </template>
      <template #footer>
        <slot name="footer"></slot>
      </template>
    </Card>
  </form>
</template>